
<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='utf-8'/>
	<title>Source: detect.js - JSDoc</title>
	<link type='text/css' rel='stylesheet' href='css/jsdoc-template.css'/>
	<meta name="viewport" content="width=device-width,
                        initial-scale=1"/>
</head>
<body data-gs='{"openPageHeader": "is-page-header-open", "searching": "is-searching"}'>
	<div id='page-wrapper'>
		<header id='page-header' data-gs-target='openPageHeader'>
			
			<h1 id='page-title'>
				<a href="/">JSDoc</a>
			</h1>
			
			<nav id='content-nav'>
				<header>
					<div id='search'>
						<div class='textfield-wrapper'>
							<input type='search' name='q' placeholder='Search...' data-internal-search='#content-nav li a' data-gs-search='searching'/>
						</div>
					</div>
				</header>
				<h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><abbr title="Module">Mod</abbr> <a href="detect%250ALanguage%2520detectormodule_.html">detect
Language detector</a></li><li><abbr title="Module">Mod</abbr> <a href="index%250ABase%2520scriptmodule_.html">index
Base script</a></li><li><abbr title="Module">Mod</abbr> <a href="term%250ATerminal%2520adaptormodule_.html">term
Terminal adaptor</a></li></ul>
			</nav>
		</header>
		<div id='main-wrapper'>
			<button id='page-header-opener' title='Toggle left bar' class='has-icon' data-css-icon='menu' type='button' data-gs-toggle='openPageHeader'>Toggle left bar</button>
			<main id='content'>
				<header>
					<h1 id='content-title'>Source: detect.js</h1>
				</header>
				



    
    <figure class='source-code-wrapper'>
        <pre class="prettyprint source linenums"><code>/**
 * @module detect
 * Language detector
*/

const languages = [
	['bash', [/#!(\/usr)?\/bin\/bash/g, 500], [/\b(if|elif|then|fi|echo)\b|\$/g, 10]],
	['html', [/&lt;\/?[a-z-]+[^\n>]*>/g, 10], [/^\s+&lt;!DOCTYPE\s+html/g, 500]],
	['http', [/^(GET|HEAD|POST|PUT|DELETE|PATCH|HTTP)\b/g, 500]],
	['js', [/\b(console|await|async|function|export|import|this|class|for|let|const|map|join|require)\b/g, 10]],
	['ts', [/\b(console|await|async|function|export|import|this|class|for|let|const|map|join|require|implements|interface|namespace)\b/g, 10]],
	['py', [/\b(def|print|class|and|or|lambda)\b/g, 10]],
	['sql', [/\b(SELECT|INSERT|FROM)\b/g, 50]],
	['pl', [/#!(\/usr)?\/bin\/perl/g, 500], [/\b(use|print)\b|\$/g, 10]],
	['lua', [/#!(\/usr)?\/bin\/lua/g, 500]],
	['make', [/\b(ifneq|endif|if|elif|then|fi|echo|.PHONY|^[a-z]+ ?:$)\b|\$/gm, 10]],
	['uri', [/https?:|mailto:|tel:|ftp:/g, 30]],
	['css', [/^(@import|@page|@media|(\.|#)[a-z]+)/gm, 20]],
	['diff', [/^[+>&lt;-]/gm, 10], [/^@@ ?[-+,0-9 ]+ ?@@/gm, 25]],
	['md', [/^(>|\t\*|\t\d+.)/gm, 10], [/\[.*\](.*)/g, 10]],
	['docker', [/^(FROM|ENTRYPOINT|RUN)/gm, 500]],
	['xml', [/&lt;\/?[a-z-]+[^\n>]*>/g, 10], [/^&lt;\?xml/g, 500]],
	['c', [/#include\b|\bprintf\s+\(/g, 100]],
	['rs', [/^\s+(use|fn|mut|match)\b/gm, 100]],
	['go', [/\b(func|fmt|package)\b/g, 100]],
	['java', [/^import\s+java/gm, 500]],
	['asm', [/^(section|global main|extern|\t(call|mov|ret))/gm, 100]],
]

/**
 * Try to find the language the given code belong to
 * @param {String} code The code
 * @returns {String} The language of the code
 */
export const detectLanguage = code => {
	return (languages
		.map(([lang, ...features]) => [
			features.reduce((acc, [match, score]) => acc + [...code.matchAll(match)].length * score, 0),
			lang
		])
		.filter(([score, lang]) => score > 10)
		.sort((a, b) => b[0] - a[0])[0]?.[1] || 'plain');
}
</code></pre>
    </figure>





			</main>
			<footer id='page-footer'>
				<small>Documentation generated by <a href='https://github.com/jsdoc/jsdoc' rel='noreferrer noopener' target='_blank'>JSDoc 3.6.7</a>.</small>
				<small style='margin-left: 1em;'>Design by <a
                        href='https://github.com/AlexisPuga'
                        target='_blank'
                        rel="noopener noreferrer">Alexis Puga</a>.</small>
			</footer>
		</div>
	</div>
	<script src='js/jsdoc-template.js' async></script>
	
	<script src='js/prettify.min.js' async></script>
	<link rel='stylesheet' type='text/css' href='css/tomorrow.min.css'/>
	
	
</body>
</html>
