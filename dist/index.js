var x={num:{type:"num",match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g},str:{type:"str",match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g},strDouble:{type:"str",match:/"((?!")[^\r\n\\]|\\[^])*"?/g}};var u={},m=(e="")=>{var a,n,h,t;return(t=(n=(a=e.replaceAll("&","&#38;")).replaceAll)==null?void 0:(h=n.call(a,"<","&lt;")).replaceAll)==null?void 0:t.call(h,">","&gt;")},o=(e,a)=>a?`<span class="shj-syn-${a}">${e}</span>`:e;async function f(e,a,n){var h;try{let t,s,i={},p,l=[],r=0,d=typeof a=="string"?await((h=u[a])!=null?h:u[a]=import(`./languages/${a}.js`)):a,c=[...typeof a=="string"?d.default:a.sub];for(;r<e.length;){for(i.index=null,t=c.length;t-- >0;){if(s=c[t].expand?x[c[t].expand]:c[t],l[t]===void 0||l[t].match.index<r){if(s.match.lastIndex=r,p=s.match.exec(e),p===null){c.splice(t,1),l.splice(t,1);continue}l[t]={match:p,lastIndex:s.match.lastIndex}}l[t].match[0]&&(l[t].match.index<=i.index||i.index===null)&&(i={part:s,index:l[t].match.index,match:l[t].match[0],end:l[t].lastIndex})}if(i.index===null)break;n(e.slice(r,i.index),d.type),r=i.end,i.part.sub?await f(i.match,typeof i.part.sub=="string"?i.part.sub:typeof i.part.sub=="function"?i.part.sub(i.match):i.part,n):n(i.match,i.part.type)}n(e.slice(r,e.length),d.type)}catch{n(e)}}async function y(e,a,n=!0,h={}){let t=n&&!h.hideLineNumbers?`<div><div class="shj-numbers">${"<div></div>".repeat(e.split(`
`).length)}</div><div>`:"";return await f(e,a,(s,i)=>t+=o(m(s),i)),n&&(t+="</div></div>"),t}async function g(e,a=(h=>(h=e.className.match(/shj-lang-([\w-]+)/))==null?void 0:h[1])(),n){let t=e.textContent;n!=null||(n=`${e.tagName=="CODE"?"in":t.split(`
`).length<2?"one":"multi"}line`),e.dataset.lang=a,e.className=`${[...e.classList].filter(s=>!s.startsWith("shj-")||s.startsWith("shj-mode-")).join(" ")} shj-lang-${a} shj-${n}`,e.innerHTML=await y(t,a,n=="multiline")}var v=async()=>document.querySelectorAll('[class*="shj-lang-"]').forEach(e=>g(e));export{v as highlightAll,g as highlightElement,y as highlightText,f as tokenize};
