var m={num:{match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g,type:"num"},str:{match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g,type:"str"},strDouble:{match:/"((?!")[^\r\n\\]|\\[^])*"?/g,type:"str"}};var r={},u=(e="")=>{var a,n,t,s;return(s=(n=(a=e.replaceAll("&","&#38;")).replaceAll)==null?void 0:(t=n.call(a,"<","&lt;")).replaceAll)==null?void 0:s.call(t,">","&gt;")},f=(e,a)=>a?`<span class="shj-syn-${a}">${e}</span>`:e;async function o(e,a,n){var x;let t,s,i={},d,c=[],l=0,p=typeof a=="string"?await((x=r[a])!=null?x:r[a]=import(`./languages/${a}.js`)):a,h=[...typeof a=="string"?p.default:a.sub];for(;l<e.length;){for(i.index=null,t=h.length;t-- >0;){if(s=h[t].expand?m[h[t].expand]:h[t],c[t]===void 0||c[t].match.index<l){if(s.match.lastIndex=l,d=s.match.exec(e),d===null){h.splice(t,1),c.splice(t,1);continue}c[t]={match:d,lastIndex:s.match.lastIndex}}c[t].match[0]&&(c[t].match.index<=i.index||i.index===null)&&(i={part:s,index:c[t].match.index,match:c[t].match[0],end:c[t].lastIndex})}if(i.index===null)break;n(e.slice(l,i.index),p.type),l=i.end,i.part.sub?await o(i.match,typeof i.part.sub=="string"?i.part.sub:i.part,n):n(i.match,i.part.type)}n(e.slice(l,e.length),p.type)}async function y(e,a,n=!0){let t=n?`<div><div class="shj-numbers">${"<div></div>".repeat(e.split(`
`).length)}</div><div>`:"";return await o(e,a,(s,i)=>t+=f(u(s),i)),n&&(t+="</div></div>"),t}async function g(e,a=(t=>(t=e.className.match(/shj-lang-([\w-]+)/))==null?void 0:t[1])(),n=e.tagName!="CODE"){e.dataset.lang=a,e.classList.add("shj-lang-"+a),e.innerHTML=await y(e.textContent,a,n)}var j=async()=>document.querySelectorAll('[class*="shj-lang-"]').forEach(e=>g(e));export{j as highlightAll,g as highlightElement,y as highlightText,o as tokenize};
