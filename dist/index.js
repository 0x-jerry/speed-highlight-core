var x={num:{type:"num",match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g},str:{type:"str",match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g},strDouble:{type:"str",match:/"((?!")[^\r\n\\]|\\[^])*"?/g}};var u={},m=(t="")=>{var a,n,l,e;return(e=(n=(a=t.replaceAll("&","&#38;")).replaceAll)==null?void 0:(l=n.call(a,"<","&lt;")).replaceAll)==null?void 0:e.call(l,">","&gt;")},o=(t,a)=>a?`<span class="shj-syn-${a}">${t}</span>`:t;async function f(t,a,n){var l;try{let e,s,i={},r,h=[],c=0,d=typeof a=="string"?await((l=u[a])!=null?l:u[a]=import(`./languages/${a}.js`)):a,p=[...typeof a=="string"?d.default:a.sub];for(;c<t.length;){for(i.index=null,e=p.length;e-- >0;){if(s=p[e].expand?x[p[e].expand]:p[e],h[e]===void 0||h[e].match.index<c){if(s.match.lastIndex=c,r=s.match.exec(t),r===null){p.splice(e,1),h.splice(e,1);continue}h[e]={match:r,lastIndex:s.match.lastIndex}}h[e].match[0]&&(h[e].match.index<=i.index||i.index===null)&&(i={part:s,index:h[e].match.index,match:h[e].match[0],end:h[e].lastIndex})}if(i.index===null)break;n(t.slice(c,i.index),d.type),c=i.end,i.part.sub?await f(i.match,typeof i.part.sub=="string"?i.part.sub:typeof i.part.sub=="function"?i.part.sub(i.match):i.part,n):n(i.match,i.part.type)}n(t.slice(c,t.length),d.type)}catch{n(t)}}async function y(t,a,n=!0,l={}){let e="";return await f(t,a,(s,i)=>e+=o(m(s),i)),n?`<div><div class="shj-numbers">${"<div></div>".repeat(!l.hideLineNumbers&&t.split(`
`).length)}</div><div>${e}</div></div>`:e}async function g(t,a=(e=>(e=t.className.match(/shj-lang-([\w-]+)/))==null?void 0:e[1])(),n,l){let s=t.textContent;n!=null||(n=`${t.tagName=="CODE"?"in":s.split(`
`).length<2?"one":"multi"}line`),t.dataset.lang=a,t.className=`${[...t.classList].filter(i=>!i.startsWith("shj-")||i.startsWith("shj-mode-")).join(" ")} shj-lang-${a} shj-${n}`,t.innerHTML=await y(s,a,n=="multiline",l)}var $=async t=>document.querySelectorAll('[class*="shj-lang-"]').forEach(a=>g(a,void 0,void 0,t));export{$ as highlightAll,g as highlightElement,y as highlightText,f as tokenize};
