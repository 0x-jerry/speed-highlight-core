var x={num:{match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g,type:"num"},str:{match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g,type:"str"},strDouble:{match:/"((?!")[^\r\n\\]|\\[^])*"?/g,type:"str"}};var d={},o=(e="")=>{var i,n,t,s;return(s=(n=(i=e.replaceAll("&","&#38;")).replaceAll)==null?void 0:(t=n.call(i,"<","&lt;")).replaceAll)==null?void 0:s.call(t,">","&gt;")},m=(e,i)=>i?`<span class="shj-syn-${i}">${e}</span>`:e;async function f(e,i,n){var u;let t,s,a={},r,l=[],h=0,p=typeof i=="string"?await((u=d[i])!=null?u:d[i]=import(`./languages/${i}.js`)):i,c=[...typeof i=="string"?p.default:i.sub];for(;h<e.length;){for(a.index=null,t=c.length;t-- >0;){if(s=c[t].expand?x[c[t].expand]:c[t],l[t]===void 0||l[t].match.index<h){if(s.match.lastIndex=h,r=s.match.exec(e),r===null){c.splice(t,1),l.splice(t,1);continue}l[t]={match:r,lastIndex:s.match.lastIndex}}l[t].match[0]&&(l[t].match.index<=a.index||a.index===null)&&(a={part:s,index:l[t].match.index,match:l[t].match[0],end:l[t].lastIndex})}if(a.index===null)break;n(e.slice(h,a.index),p.type),h=a.end,a.part.sub?await f(a.match,typeof a.part.sub=="string"?a.part.sub:typeof a.part.sub=="function"?a.part.sub(a.match):a.part,n):n(a.match,a.part.type)}n(e.slice(h,e.length),p.type)}async function y(e,i,n=!0){let t=n?`<div><div class="shj-numbers">${"<div></div>".repeat(e.split(`
`).length)}</div><div>`:"";return await f(e,i,(s,a)=>t+=m(o(s),a)),n&&(t+="</div></div>"),t}async function g(e,i=(t=>(t=e.className.match(/shj-lang-([\w-]+)/))==null?void 0:t[1])(),n){let s=e.textContent;n!=null||(n=`${e.tagName=="CODE"?"in":s.split(`
`).length<2?"one":"multi"}line`),e.dataset.lang=i,e.className=`${[...e.classList].filter(a=>!a.startsWith("shj-")||a.startsWith("shj-mode-")).join(" ")} shj-lang-${i} shj-${n}`,e.innerHTML=await y(s,i,n=="multiline")}var v=async()=>document.querySelectorAll('[class*="shj-lang-"]').forEach(e=>g(e));export{v as highlightAll,g as highlightElement,y as highlightText,f as tokenize};
