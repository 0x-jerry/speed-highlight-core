var r={num:{match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g,type:"num"},str:{match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g,type:"str"},strDouble:{match:/"((?!")[^\r\n\\]|\\[^])*"?/g,type:"str"}};var m={},o=(t="")=>t.replaceAll("&","&#38;").replaceAll?.("<","&lt;").replaceAll?.(">","&gt;"),u=(t,n)=>n?`<span class="shj-syn-${n}">${t}</span>`:t;async function x(t,n,i){let e,l,a={},d,s=[],c=0,p=typeof n=="string"?await(m[n]??=import(`./languages/${n}.js`)):n,h=[...typeof n=="string"?p.default:n.sub];for(;c<t.length;){for(a.index=null,e=h.length;e-- >0;){if(l=h[e].expand?r[h[e].expand]:h[e],s[e]===void 0||s[e].match.index<c){if(l.match.lastIndex=c,d=l.match.exec(t),d===null){h.splice(e,1),s.splice(e,1);continue}s[e]={match:d,lastIndex:l.match.lastIndex}}s[e].match[0]&&(s[e].match.index<=a.index||a.index===null)&&(a={part:l,index:s[e].match.index,match:s[e].match[0],end:s[e].lastIndex})}if(a.index===null)break;i(t.slice(c,a.index),p.type),c=a.end,a.part.sub?await x(a.match,typeof a.part.sub=="string"?a.part.sub:a.part,i):i(a.match,a.part.type)}i(t.slice(c,t.length),p.type)}async function f(t,n,i=!0){let e=i?`<div><div class="shj-numbers">${"<div></div>".repeat(t.split(`
`).length)}</div><div>`:"";return await x(t,n,(l,a)=>e+=u(o(l),a)),i&&(e+="</div></div>"),e}async function g(t,n=t.className.match(/shj-lang-([\w-]+)/)?.[1],i=t.tagName!="CODE"){t.dataset.lang=n,t.classList.add("shj-lang-"+n),t.innerHTML=await f(t.textContent,n,i)}var v=async()=>document.querySelectorAll('[class*="shj-lang-"]').forEach(t=>g(t));export{v as highlightAll,g as highlightElement,f as highlightText,x as tokenize};
