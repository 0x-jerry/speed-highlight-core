var x={num:{type:"num",match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g},str:{type:"str",match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g},strDouble:{type:"str",match:/"((?!")[^\r\n\\]|\\[^])*"?/g}};var u={},o=(t="")=>{var a,i,s,e;return(e=(i=(a=t.replaceAll("&","&#38;")).replaceAll)==null?void 0:(s=i.call(a,"<","&lt;")).replaceAll)==null?void 0:e.call(s,">","&gt;")},m=(t,a)=>a?`<span class="shj-syn-${a}">${t}</span>`:t;async function f(t,a,i){var s;try{let e,l,n={},p,h=[],c=0,d=typeof a=="string"?await((s=u[a])!=null?s:u[a]=import(`./languages/${a}.js`)):a,r=[...typeof a=="string"?d.default:a.sub];for(;c<t.length;){for(n.index=null,e=r.length;e-- >0;){if(l=r[e].expand?x[r[e].expand]:r[e],h[e]===void 0||h[e].match.index<c){if(l.match.lastIndex=c,p=l.match.exec(t),p===null){r.splice(e,1),h.splice(e,1);continue}h[e]={match:p,lastIndex:l.match.lastIndex}}h[e].match[0]&&(h[e].match.index<=n.index||n.index===null)&&(n={part:l,index:h[e].match.index,match:h[e].match[0],end:h[e].lastIndex})}if(n.index===null)break;i(t.slice(c,n.index),d.type),c=n.end,n.part.sub?await f(n.match,typeof n.part.sub=="string"?n.part.sub:typeof n.part.sub=="function"?n.part.sub(n.match):n.part,i):i(n.match,n.part.type)}i(t.slice(c,t.length),d.type)}catch{i(t)}}async function y(t,a,i=!0){let s=i?`<div><div class="shj-numbers">${"<div></div>".repeat(t.split(`
`).length)}</div><div>`:"";return await f(t,a,(e,l)=>s+=m(o(e),l)),i&&(s+="</div></div>"),s}async function g(t,a=(s=>(s=t.className.match(/shj-lang-([\w-]+)/))==null?void 0:s[1])(),i){let e=t.textContent;i!=null||(i=`${t.tagName=="CODE"?"in":e.split(`
`).length<2?"one":"multi"}line`),t.dataset.lang=a,t.className=`${[...t.classList].filter(l=>!l.startsWith("shj-")||l.startsWith("shj-mode-")).join(" ")} shj-lang-${a} shj-${i}`,t.innerHTML=await y(e,a,i=="multiline")}var v=async()=>document.querySelectorAll('[class*="shj-lang-"]').forEach(t=>g(t));export{v as highlightAll,g as highlightElement,y as highlightText,f as tokenize};
